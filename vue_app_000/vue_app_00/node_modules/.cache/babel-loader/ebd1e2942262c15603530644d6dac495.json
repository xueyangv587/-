{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\src\\components\\sub\\comment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\src\\components\\sub\\comment.vue","mtime":1571842838115},{"path":"C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\移动端电脑商城\\-\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      pno: 0,\n      pageSize: 5,\n      list: [],\n      msg: \"\"\n    };\n  },\n  created: function created() {\n    this.getMore();\n  },\n  methods: {\n    // 添加评论\n    addcomment: function addcomment() {\n      var _this = this;\n\n      //获取评论内容\n      var msg = this.msg; //trim()去除字符串两端的空格\n\n      var size = msg.trim().length;\n\n      if (size == 0) {\n        //添加提示框\n        Toast(\"评论内容不能为空\");\n        return;\n      }\n\n      var nid = this.$route.query.nid;\n      console.log(nid); //1:创建参数对象 postData\n\n      var postDate = this.qs.stringify({\n        nid: nid,\n        content: this.msg\n      }); //2:发送post请求\n\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"addcomment\";\n      this.axios.post(url, postDate).then(function (result) {\n        console.log(result.data); //1:提示框 发表成功 \n\n        Toast(result.data.msg); //2:清空评论区域内容\n\n        _this.msg = \"\"; //2.1:清空页码\n\n        _this.pno = 0; //2.2:清空原有数组\n\n        _this.list = []; //3:立即查看评论结果\n\n        _this.getMore();\n      }); //3:接受返回数据\n      //4:在created()调用 \n    },\n    getMore: function getMore() {\n      var _this2 = this;\n\n      this.pno++;\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"getComment?nid=\" + this.$route.query.nid;\n      url += \"&pno=\" + this.pno;\n      url += \"&pageSize=\" + this.pageSize;\n      this.axios.get(url).then(function (result) {\n        console.log(result.data.data);\n\n        var rows = _this2.list.concat(result.data.data);\n\n        _this2.list = rows;\n      });\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,WAAA,CADA;AAEA,gBAAA,CAFA;AAGA,YAAA,EAHA;AAIA,WAAA;AAJA,KAAA;AAMA,GARA;AASA,SATA,qBASA;AACA,SAAA,OAAA;AACA,GAXA;AAYA,WAAA;AACA;AACA,cAFA,wBAEA;AAAA;;AACA;AACA,UAAA,MAAA,KAAA,GAAA,CAFA,CAGA;;AACA,UAAA,OAAA,IAAA,IAAA,GAAA,MAAA;;AACA,UAAA,QAAA,CAAA,EAAA;AACA;AACA,cAAA,UAAA;AACA;AACA;;AACA,UAAA,MAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,cAAA,GAAA,CAAA,GAAA,EAXA,CAYA;;AACA,UAAA,WAAA,KAAA,EAAA,CAAA,SAAA,CAAA;AACA,aAAA,GADA;AAEA,iBAAA,KAAA;AAFA,OAAA,CAAA,CAbA,CAiBA;;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,YAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,QAAA,EAAA,IAAA,CAAA,kBAAA;AACA,gBAAA,GAAA,CAAA,OAAA,IAAA,EADA,CAEA;;AACA,cAAA,OAAA,IAAA,CAAA,GAAA,EAHA,CAIA;;AACA,cAAA,GAAA,GAAA,EAAA,CALA,CAMA;;AACA,cAAA,GAAA,GAAA,CAAA,CAPA,CAQA;;AACA,cAAA,IAAA,GAAA,EAAA,CATA,CAUA;;AACA,cAAA,OAAA;AACA,OAZA,EApBA,CAkCA;AACA;AACA,KAtCA;AAuCA,WAvCA,qBAuCA;AAAA;;AACA,WAAA,GAAA;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,oBAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,aAAA,UAAA,KAAA,GAAA;AACA,aAAA,eAAA,KAAA,QAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,kBAAA;AACA,gBAAA,GAAA,CAAA,OAAA,IAAA,CAAA,IAAA;;AACA,YAAA,OAAA,OAAA,IAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA,IAAA,CAAA;;AACA,eAAA,IAAA,GAAA,IAAA;AACA,OAJA;AAKA;AAlDA;AAZA,CAAA","sourcesContent":["<template>\r\n  <div> \r\n    <div class=\"mui-card\">\r\n      <div class=\"mui-card-header\"></div>\r\n      <div class=\"mui-card-content\">\r\n        <div class=\"mui-card-content-inner\">\r\n          <textarea placeholder=\"请吐槽最多120个字\" cols=\"20\" rows=\"5\" maxlength=\"120\" v-model=\"msg\"></textarea>\r\n          <mt-button type=\"primary\" size=\"large\" @click=\"addcomment()\">发表评论</mt-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"mui-card-footer\">\r\n        <div class=\"cmt-list\">\r\n          <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\">\r\n            <div>第{{i+1}}楼 发表时间{{item.ctime | datatimeFilter}}</div>\r\n            <div>{{item.content}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n import {Toast} from \"mint-ui\"\r\nexport default {\r\n  data(){\r\n    return{\r\n      pno:0,\r\n      pageSize:5,\r\n      list:[],\r\n      msg:\"\"\r\n    }\r\n  },\r\n  created(){\r\n    this.getMore();\r\n  },\r\n  methods:{\r\n    // 添加评论\r\n    addcomment(){\r\n      //获取评论内容\r\n      var msg=this.msg;\r\n      //trim()去除字符串两端的空格\r\n      var size=msg.trim().length;\r\n      if(size==0){\r\n        //添加提示框\r\n        Toast(\"评论内容不能为空\");\r\n        return;\r\n      }\r\n      var nid=this.$route.query.nid;\r\n      console.log(nid)\r\n      //1:创建参数对象 postData\r\n      var postDate=this.qs.stringify({\r\n        nid:nid,\r\n        content:this.msg\r\n      });\r\n      //2:发送post请求\r\n      var url=\"http://127.0.0.1:3000/\";\r\n      url+=\"addcomment\"\r\n      this.axios.post(url,postDate).then(result=>{\r\n        console.log(result.data);\r\n        //1:提示框 发表成功 \r\n        Toast(result.data.msg);\r\n        //2:清空评论区域内容\r\n        this.msg=\"\";\r\n        //2.1:清空页码\r\n        this.pno=0;\r\n        //2.2:清空原有数组\r\n        this.list=[];\r\n        //3:立即查看评论结果\r\n        this.getMore();\r\n      });\r\n      \r\n      //3:接受返回数据\r\n      //4:在created()调用 \r\n    },\r\n    getMore(){\r\n      this.pno++;\r\n      var url=\"http://127.0.0.1:3000/\";\r\n      url+=\"getComment?nid=\"+this.$route.query.nid;\r\n      url+=\"&pno=\"+this.pno;\r\n      url+=\"&pageSize=\"+this.pageSize;\r\n      this.axios.get(url).then(result=>{\r\n        console.log(result.data.data);\r\n        var rows=this.list.concat(result.data.data);\r\n        this.list=rows;\r\n      })\r\n    }\r\n  }\r\n  \r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src\\components\\sub"}]}